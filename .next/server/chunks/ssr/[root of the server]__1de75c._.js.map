{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/Documents/MERN/blogApp/src/app/dashboard/articles/create/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard/articles/create/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard/articles/create/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/Documents/MERN/blogApp/src/app/dashboard/articles/create/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/dashboard/articles/create/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/dashboard/articles/create/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Admin/Documents/MERN/blogApp/actions/create-article.ts"],"sourcesContent":["\"use server\"; //directive\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { z } from \"zod\";\r\nimport {v2 as cloudinary, UploadApiResponse} from \"cloudinary\";\r\n\r\ncloudinary.config({\r\n    cloud_name:process.env.CLOUD_NAME,\r\n    api_key:process.env.CLOUDINARY_API_KEY,\r\n    api_secret:process.env.CLOUDINARY_API_SECRET\r\n})\r\nconst createArticleSchema = z.object({\r\n  title: z.string().min(3).max(100),\r\n  category: z.string().min(3).max(50),\r\n  content: z.string().min(10),\r\n});\r\n\r\ntype CreateArticlesFormState = {\r\n  errors: {\r\n    title?: string[];\r\n    category?: string[];\r\n    ftdImg?: string[];\r\n    content?: string[];\r\n    formErrors?: string[];\r\n  };\r\n};\r\n\r\nexport const createArticle = async (\r\n    prevState: CreateArticlesFormState,\r\n    formData: FormData\r\n  ): Promise<CreateArticlesFormState> => {\r\n    \r\n    const result = createArticleSchema.safeParse({\r\n      title: formData.get(\"title\"),\r\n      category: formData.get(\"category\"),\r\n      content: formData.get(\"content\"), \r\n    });\r\n  \r\n    if (!result.success) {\r\n      return {\r\n        errors: result.error.flatten().fieldErrors,\r\n      };\r\n    }\r\n  const { userId } = await auth();\r\n  if (!userId) {\r\n    return {\r\n      errors: {\r\n        formErrors: [\"You have to login first\"],\r\n      },\r\n    };\r\n  }\r\n\r\n  //creating article finally\r\n\r\n  //image validation\r\n  const imageFile = formData.get('ftdImg') as File | null;\r\n  if(!imageFile || imageFile.name === \"undefined\") {\r\n    return {\r\n        errors: {\r\n            ftdImg: ['Image file is required']\r\n        }\r\n    }\r\n  }\r\n//converting img to a buffer\r\nconst arrayBuffer = await imageFile.arrayBuffer();\r\nconst buffer = Buffer.from(arrayBuffer);\r\n//uploading to cloudinary\r\nconst uploadResponse : UploadApiResponse | undefined = await new Promise((resolve, reject) => {\r\n    const uploadStream = cloudinary.uploader.upload_stream(\r\n        {resource_type: 'auto'},\r\n        (error, result) => {\r\n            if (error) {\r\n                reject(error);\r\n            } else {\r\n                resolve(result);\r\n            }\r\n        }\r\n    );\r\n    uploadStream.end(buffer);\r\n})\r\n\r\n\r\n  revalidatePath(\"/dashboard\");\r\n  redirect(\"/dashboard\");\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;;AADA;AAHA;AAEA;;;;;;;;AAIA,wIAAA,CAAA,KAAU,CAAC,MAAM,CAAC;IACd,YAAW,QAAQ,GAAG,CAAC,UAAU;IACjC,SAAQ,QAAQ,GAAG,CAAC,kBAAkB;IACtC,YAAW,QAAQ,GAAG,CAAC,qBAAqB;AAChD;AACA,MAAM,sBAAsB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IAC7B,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IAChC,SAAS,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC1B;AAYO,MAAM,uCAAW,GAAX,gBAAgB,OACzB,WACA;IAGA,MAAM,SAAS,oBAAoB,SAAS,CAAC;QAC3C,OAAO,SAAS,GAAG,CAAC;QACpB,UAAU,SAAS,GAAG,CAAC;QACvB,SAAS,SAAS,GAAG,CAAC;IACxB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO;YACL,QAAQ,OAAO,KAAK,CAAC,OAAO,GAAG,WAAW;QAC5C;IACF;IACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA,GAAA,mLAAA,CAAA,OAAI,AAAD;IAC5B,IAAI,CAAC,QAAQ;QACX,OAAO;YACL,QAAQ;gBACN,YAAY;oBAAC;iBAA0B;YACzC;QACF;IACF;IAEA,0BAA0B;IAE1B,kBAAkB;IAClB,MAAM,YAAY,SAAS,GAAG,CAAC;IAC/B,IAAG,CAAC,aAAa,UAAU,IAAI,KAAK,aAAa;QAC/C,OAAO;YACH,QAAQ;gBACJ,QAAQ;oBAAC;iBAAyB;YACtC;QACJ;IACF;IACF,4BAA4B;IAC5B,MAAM,cAAc,MAAM,UAAU,WAAW;IAC/C,MAAM,SAAS,OAAO,IAAI,CAAC;IAC3B,yBAAyB;IACzB,MAAM,iBAAiD,MAAM,IAAI,QAAQ,CAAC,SAAS;QAC/E,MAAM,eAAe,wIAAA,CAAA,KAAU,CAAC,QAAQ,CAAC,aAAa,CAClD;YAAC,eAAe;QAAM,GACtB,CAAC,OAAO;YACJ,IAAI,OAAO;gBACP,OAAO;YACX,OAAO;gBACH,QAAQ;YACZ;QACJ;QAEJ,aAAa,GAAG,CAAC;IACrB;IAGE,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;IACf,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;AACX;;;IAzDa;;AAAA,+OAAA"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}